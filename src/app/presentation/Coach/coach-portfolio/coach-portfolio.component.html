<div class="portfolio-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p>Loading your portfolio...</p>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading" class="portfolio-content">
    <div class="portfolio-header">
      <h2>{{ isNewPortfolio ? 'Create Your Portfolio' : 'Coach Portfolio' }}</h2>
      <p class="text-muted">{{ isNewPortfolio ? 'Set up your professional profile to showcase your expertise' : 'Manage
        your professional profile and showcase your expertise' }}</p>
    </div>

    <!-- Profile Image Section -->
    <div class="profile-image-section">
      <div class="image-preview" *ngIf="existingImageUrl">
        <img [src]="existingImageUrl" alt="Profile Preview" class="profile-preview">
        <div class="image-overlay">
          <label for="aboutMeImage" class="change-image-btn" tabindex="0">
            <i class="bi bi-camera" aria-hidden="true"></i>
            Change Image
          </label>
        </div>
      </div>
      <div class="image-upload" *ngIf="!existingImageUrl">
        <label for="aboutMeImage" class="upload-btn" tabindex="0">
          <i class="bi bi-cloud-upload" aria-hidden="true"></i>
          <span>Upload Profile Image</span>
        </label>
      </div>
      <input type="file" id="aboutMeImage" (change)="onFileSelected($event)" class="d-none" accept="image/*"
        aria-label="Upload profile image">
      <small class="image-hint">Recommended size: 500x500px, Max file size: 2MB</small>
    </div>

    <!-- Portfolio Form -->
    <form [formGroup]="portfolioForm" (ngSubmit)="onSubmit()" class="portfolio-form" novalidate>
      <div class="form-section">
        <h3>Basic Information</h3>
        <div class="form-group">
          <label for="aboutMeDescription">
            <i class="bi bi-person-lines-fill" aria-hidden="true"></i>
            About Me
          </label>
          <textarea id="aboutMeDescription" formControlName="aboutMeDescription" class="form-control" rows="4"
            placeholder="Tell us about yourself, your coaching philosophy, and what makes you unique..."
            aria-describedby="aboutMeDescriptionHint"></textarea>
          <small id="aboutMeDescriptionHint" class="form-hint">Share your coaching approach and what clients can expect
            from working with you</small>
          <div
            *ngIf="portfolioForm.get('aboutMeDescription')?.invalid && portfolioForm.get('aboutMeDescription')?.touched"
            class="error-message">
            About Me description is required
          </div>
        </div>

        <div class="form-group">
          <label for="experienceYears">
            <i class="bi bi-calendar-check" aria-hidden="true"></i>
            Years of Experience
          </label>
          <input type="number" id="experienceYears" formControlName="experienceYears" class="form-control"
            placeholder="Enter your years of experience" min="0" aria-describedby="experienceYearsHint">
          <small id="experienceYearsHint" class="form-hint">Enter the number of years you've been coaching
            professionally</small>
          <div *ngIf="portfolioForm.get('experienceYears')?.invalid && portfolioForm.get('experienceYears')?.touched"
            class="error-message">
            Please enter a valid number of years
          </div>
        </div>

        <div class="form-group">
          <label for="qualifications">
            <i class="bi bi-award" aria-hidden="true"></i>
            Qualifications
          </label>
          <textarea id="qualifications" formControlName="qualifications" class="form-control" rows="3"
            placeholder="List your certifications, degrees, and professional qualifications..."
            aria-describedby="qualificationsHint"></textarea>
          <small id="qualificationsHint" class="form-hint">Include all relevant certifications and educational
            background</small>
          <div *ngIf="portfolioForm.get('qualifications')?.invalid && portfolioForm.get('qualifications')?.touched"
            class="error-message">
            Qualifications are required
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Professional Details</h3>
        <div class="form-group">
          <label for="skills">
            <i class="bi bi-tools" aria-hidden="true"></i>
            Skills
          </label>
          <input type="text" id="skills" formControlName="skills" class="form-control"
            placeholder="Enter skills separated by commas" aria-describedby="skillsHint">
          <small id="skillsHint" class="form-hint">Example: Personal Training, Nutrition Counseling, Yoga
            Instruction</small>
        </div>

        <div class="form-group">
          <label for="socialLinks">
            <i class="bi bi-link-45deg" aria-hidden="true"></i>
            Social Media Links
          </label>
          <input type="text" id="socialLinks" formControlName="socialLinks" class="form-control"
            placeholder="Enter your social media profile URLs" aria-describedby="socialLinksHint">
          <small id="socialLinksHint" class="form-hint">Example: https://linkedin.com/in/yourname,
            https://instagram.com/yourname</small>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="portfolioForm.invalid">
          <i class="bi bi-save" aria-hidden="true"></i>
          {{ isNewPortfolio ? 'Create Portfolio' : 'Save Changes' }}
        </button>
      </div>
    </form>
  </div>
</div>