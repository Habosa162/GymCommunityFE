<section class="coach-profile min-vh-100">
  <!-- Hero Section -->
  <div class="hero-section position-relative">
    <div class="hero-overlay"></div>
    <div class="container position-relative">
      <div class="row align-items-center py-5">
        <div class="col-md-4 text-center">
          <div class="coach-avatar">
            <img [src]="portfolio.aboutMeImageUrl" class="img-fluid rounded-circle" alt="Coach Profile">
          </div>
        </div>
        <div class="col-md-8">
          <div class="coach-header">
            <h1 class="coach-name">{{ portfolio.qualifications }}</h1>
            <div class="coach-stats d-flex gap-4 mt-3">
              <div class="stat-item">
                <i class="bi bi-trophy-fill"></i>
                <span>{{ portfolio.experienceYears }} Years Experience</span>
              </div>
              <div class="stat-item">
                <i class="bi bi-star-fill"></i>
                <span>{{ calculateAverageRating() }} Rating</span>
              </div>
            </div>
            <!-- Rate Button - Only show for non-coach users -->
            <div class="mt-4"
              *ngIf="!isCurrentCoach && authservice.isLoggedIn() && authservice.getUserRole() === 'Client'">
              <a [routerLink]="['/coach/rate', coachId]" class="btn btn-primary">
                <i class="bi bi-star me-2"></i>Rate this Coach
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container py-4">
    <!-- About Section -->
    <div class="card coach-card">
      <div class="card-body">
        <h3 class="card-title">
          <i class="bi bi-person-lines-fill"></i>About Me
        </h3>
        <p class="card-text">{{ portfolio.aboutMeDescription }}</p>

        <!-- Skills -->
        <div *ngIf="portfolio?.skillsJson?.length" class="mt-4">
          <h5 class="mb-3">Expertise</h5>
          <div class="skills-container">
            <span *ngFor="let skill of portfolio?.skillsJson" class="skill-badge">
              {{ skill }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-4">
      <!-- Certificates Section -->
      <div class="col-md-6">
        <div class="card coach-card h-100">
          <div class="card-body">
            <h3 class="card-title">
              <i class="bi bi-award-fill"></i>Certificates
            </h3>
            <div class="certificates-grid">
              <div *ngFor="let cert of certificates" class="certificate-item">
                <img [src]="cert.imageUrl" class="img-fluid rounded" alt="Certificate">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Work Samples Section -->
      <div class="col-md-6">
        <div class="card coach-card h-100">
          <div class="card-body">
            <h3 class="card-title">
              <i class="bi bi-images"></i>Work Samples
            </h3>
            <div class="work-samples-grid">
              <div *ngFor="let sample of workSamples" class="work-sample-item">
                <img [src]="sample.imageUrl" class="img-fluid rounded" alt="Work Sample">
                <p class="sample-description">{{ sample.description }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Client Reviews Section -->
    <div class="card coach-card">
      <div class="card-body">
        <h3 class="card-title">
          <i class="bi bi-chat-quote-fill"></i>Client Reviews
        </h3>
        <div *ngIf="ratings.length > 0" class="reviews-container">
          <div *ngFor="let rating of ratings" class="review-item">
            <div class="review-header">
              <div class="client-info">
                <i class="bi bi-person-circle"></i>
                <span class="client-name">{{ rating.clientName || 'Loading...' }}</span>
              </div>
              <div class="rating">
                <i class="bi bi-star-fill" *ngFor="let star of [].constructor(rating.rate)"></i>
              </div>
            </div>
            <p class="review-text">{{ rating.comment }}</p>
          </div>
        </div>
        <div *ngIf="ratings?.length === 0" class="text-center text-muted py-4">
          <i class="bi bi-chat-square-text display-4"></i>
          <p class="mt-3">No reviews yet. Be the first to review this coach!</p>
        </div>
      </div>
    </div>