<div class="container p-3">
  <div class="row">
    <!-- Create New Button -->
    <div class="col-md-12 mb-3">
      <a routerLink="/create-product" class="btn btn-success">Create New</a>
    </div>

    <!-- Search Bar -->
    <div class="col-md-4 mb-3">
      <input type="text" [(ngModel)]="query" (input)="onSearchChange()" class="form-control" placeholder="Search products...">
    </div>
<!-- Category Filter -->
<select [(ngModel)]="categoryId" (change)="onCategoryChange()">
  <option value="">All Categories</option>
  <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
</select>

<!-- Brand Filter -->
<select [(ngModel)]="brandId" (change)="onBrandChange()">
  <option value="">All Brands</option>
  <option *ngFor="let brand of brands" [value]="brand.id">{{ brand.name }}</option>
</select>

<!-- Price Range Filter -->
<input type="number" [(ngModel)]="minPrice" placeholder="Min Price" (input)="onPriceRangeChange()">
<input type="number" [(ngModel)]="maxPrice" placeholder="Max Price" (input)="onPriceRangeChange()">

<!-- Sort by Price -->
<select [(ngModel)]="sort" (change)="onSortChange()">
  <option value="asc">Price: Low to High</option>
  <option value="desc">Price: High to Low</option>
</select>

<!-- Search Query -->
<input type="text" [(ngModel)]="query" (input)="onSearchChange()" placeholder="Search products">

    <!-- Items per Page Dropdown -->
    <div class="col-md-2 mb-3">
      <label for="itemsPerPage">Items per page:</label>
      <select id="itemsPerPage" [(ngModel)]="eleNo" (change)="onItemsPerPageChange()" class="form-select">
        <option value="8">8</option>
        <option value="12">12</option>
        <option value="16">16</option>
        <option value="20">20</option>
      </select>
    </div>

    <!-- Loading State -->
    <ng-container *ngIf="isLoading">
      <div class="row g-3">
        <div *ngFor="let skeleton of [1,2,3,4,5,6]" class="col-xl-3 col-md-6 col-sm-12">
          <div class="product-card-skeleton"></div>
        </div>
      </div>
    </ng-container>

    <!-- Products Grid -->
    <ng-container *ngIf="!isLoading">
      <div class="col-xl-3 col-md-6 col-sm-12 row mb-2" *ngFor="let product of productsList">
        <app-product [product]="product" class="col-md-12 mb-2"></app-product>
        <div class="btnGroup col-md-12 d-flex justify-content-around">
          <button class="btn btn-danger">Remove</button>
          <button class="btn btn-warning">Update</button>
        </div>
      </div>
    </ng-container>

    <!-- Pagination Controls -->
    <div class="col-md-12 d-flex justify-content-center mt-3">
      <button (click)="goToPage(page - 1)" [disabled]="page <= 1" class="btn btn-primary me-2">Previous</button>
      <span>Page {{ page }} of {{ totalPages }}</span>
      <button (click)="goToPage(page + 1)" [disabled]="page >= totalPages" class="btn btn-primary ms-2">Next</button>
    </div>
  </div>
</div>
